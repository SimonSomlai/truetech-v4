!function(t){"use strict";t.ajaxPrefilter(function(t){if(t.iframe)return t.originalURL=t.url,"iframe"}),t.ajaxTransport("iframe",function(e,a){function n(){u.each(function(e,a){var n=t(a);n.data("clone").replaceWith(n)}),r.remove(),i.one("load",function(){i.remove()}),i.attr("src","about:blank")}var r=null,i=null,o="iframe-"+t.now(),u=t(e.files).filter(":file:enabled"),d=null;if(e.dataTypes.shift(),e.data=a.data,u.length)return r=t("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:e.originalURL,target:o}),"string"==typeof e.data&&e.data.length>0&&t.error("data must not be serialized"),t.each(e.data||{},function(e,a){t.isPlainObject(a)&&(e=a.name,a=a.value),t("<input type='hidden' />").attr({name:e,value:a}).appendTo(r)}),t("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(r),d=e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", */*; q=0.01":""):e.accepts["*"],t("<input type='hidden' name='X-HTTP-Accept'>").attr("value",d).appendTo(r),u.after(function(){var e=t(this),a=e.clone().prop("disabled",!0);return e.data("clone",a),a}).next(),u.appendTo(r),{send:function(e,a){i=t("<iframe src='about:blank' name='"+o+"' id='"+o+"' style='display:none'></iframe>"),i.one("load",function(){i.one("load",function(){var t=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,e=t.documentElement?t.documentElement:t.body,r=e.getElementsByTagName("textarea")[0],i=r&&r.getAttribute("data-type")||null,o=r&&r.getAttribute("data-status")||200,u=r&&r.getAttribute("data-statusText")||"OK",d={html:e.innerHTML,text:i?r.value:e?e.textContent||e.innerText:null};n(),a(o,u,d,i?"Content-Type: "+i:null)}),r[0].submit()}),t("body").append(r,i)},abort:function(){null!==i&&(i.unbind("load").attr("src","about:blank"),n())}}})}(jQuery),function(t){var e;t.remotipart=e={setup:function(a){var n=a.data("ujs:submit-button"),r=t('meta[name="csrf-param"]').attr("content"),i=t('meta[name="csrf-token"]').attr("content"),o=a.find('input[name="'+r+'"]').length;a.one("ajax:beforeSend.remotipart",function(u,d,l){return delete l.beforeSend,l.iframe=!0,l.files=t(t.rails.fileInputSelector,a),l.data=a.serializeArray(),n&&l.data.push(n),l.files.each(function(t,e){for(var a=l.data.length-1;a>=0;a--)l.data[a].name==e.name&&l.data.splice(a,1)}),l.processData=!1,l.dataType===undefined&&(l.dataType="script *"),l.data.push({name:"remotipart_submitted",value:!0}),i&&r&&!o&&l.data.push({name:r,value:i}),t.rails.fire(a,"ajax:remotipartSubmit",[d,l])&&(t.rails.ajax(l).always(function(e){t.rails.fire(a,"ajax:remotipartComplete",[e])}),setTimeout(function(){t.rails.disableFormElements(a)},20)),e.teardown(a),!1}).data("remotipartSubmitted",!0)},teardown:function(t){t.unbind("ajax:beforeSend.remotipart").removeData("remotipartSubmitted")}},t(document).on("ajax:aborted:file","form",function(){var a=t(this);return e.setup(a),t.rails.handleRemote(a),!1})}(jQuery);